[tox]
envlist =
    flake8,py37
indexserver =
    default = https://mirrors.aliyun.com/pypi/simple

[testenv]
basepython =
    py37: python3.7

setenv =
    PYTHONHASHSEED=0
    PYCURL_SSL_LIBRARY=openssl

passenv = http_proxy HTTP_PROXY https_proxy HTTPS_PROXY no_proxy NO_PROXY

[testenv:flake8]
skip_install = true

basepython = python3.7
deps =
    -rrequirements/pylint.txt

commands = flake8 chess

[testenv:py37]
skip_install = true
deps =
    -rrequirements/deps.txt
    -rrequirements/tests.txt
    coverage>=4.5.4

commands =
    coverage run --source=chess -m pytest
    coverage html
    coverage report
